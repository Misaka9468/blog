# 一. 无向图判环



**LeetCode 684 冗余连接**



## 1.1 数学方法

节点数为n, 边数为m

若m>n-1，则一定有环.

想象一棵树，n节点有n-1条边.

## 1.2 并查集

每次加边前，先判断 该边的两个点是否有同一个祖先，如果有则有环.

## 1.3 DFS

对于节点u, 对于其所有的邻接点v，如果 v 已经visited并且v不是u的父节点，那么就有环.

具体的做法是在dfs的过程中，使用一个参数记录下当前节点的父节点(前一个被访问的节点).



# 二. 有向图判环



**LeetCode 207 课程表**



## 2.1 拓扑排序

有向无环图，一定能拓扑排序 ； 能拓扑排序的图，一定是有向无环图

所以对有向图进行一次拓扑排序。



若使用BFS的Kahn算法，那么结果条件是：最后加入到队列中的节点数 < 总节点数.

若使用DFS的Tarjan算法，那么结果条件是：在dfs的过程中遇到了【搜索中状态】的节点.